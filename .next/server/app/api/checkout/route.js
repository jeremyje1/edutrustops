"use strict";(()=>{var e={};e.id=607,e.ids=[607],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},32081:e=>{e.exports=require("child_process")},6113:e=>{e.exports=require("crypto")},82361:e=>{e.exports=require("events")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},73837:e=>{e.exports=require("util")},38102:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>R,originalPathname:()=>h,patchFetch:()=>T,requestAsyncStorage:()=>l,routeModule:()=>E,serverHooks:()=>d,staticGenerationAsyncStorage:()=>P,staticGenerationBailout:()=>I});var s={};r.r(s),r.d(s,{POST:()=>_});var o=r(10884),i=r(16132),n=r(21040),p=r(95798),u=r(69419),a=r.n(u);let c=new(a())(process.env.STRIPE_SECRET_KEY||"",{apiVersion:"2022-11-15"});async function _(e){let{tier:t,institution_name:r,billing:s}=await e.json(),o="monthly"===s?{core:process.env.NEXT_PUBLIC_STRIPE_PRICE_CORE_MONTHLY,pro:process.env.NEXT_PUBLIC_STRIPE_PRICE_PRO_MONTHLY,enterprise:process.env.NEXT_PUBLIC_STRIPE_PRICE_ENTERPRISE_MONTHLY}:{core:process.env.NEXT_PUBLIC_STRIPE_PRICE_CORE,pro:process.env.NEXT_PUBLIC_STRIPE_PRICE_PRO,enterprise:process.env.NEXT_PUBLIC_STRIPE_PRICE_ENTERPRISE},i=o[t];if(!i)return new p.Z("Invalid tier or billing period",{status:400});let n=await c.checkout.sessions.create({mode:"subscription",payment_method_types:["card"],line_items:[{price:i,quantity:1}],metadata:{institution_name:r||"",tier:t},success_url:"https://platform.edutrustops.org/success?session_id={CHECKOUT_SESSION_ID}",cancel_url:"https://platform.edutrustops.org/pricing?canceled=true"});return p.Z.json({url:n.url})}let E=new o.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/checkout/route",pathname:"/api/checkout",filename:"route",bundlePath:"app/api/checkout/route"},resolvedPagePath:"/Users/jeremy.estrella/Desktop/edutrustops/src/app/api/checkout/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:l,staticGenerationAsyncStorage:P,serverHooks:d,headerHooks:R,staticGenerationBailout:I}=E,h="/api/checkout/route";function T(){return(0,n.patchFetch)({serverHooks:d,staticGenerationAsyncStorage:P})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[271,107,419],()=>r(38102));module.exports=s})();